import{_ as l}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.576d70b4.js";import{_ as d}from"./chunks/Badge.167f4610.js";import{_ as i,o as r,c as s,k as a,a as e,H as o,Q as n}from"./chunks/framework.d8868ba7.js";import"./chunks/commonjsHelpers.725317a4.js";const T=JSON.parse('{"title":"本地图转网络地址发送","description":"","frontmatter":{},"headers":[],"relativePath":"Advance/TransURL.md","filePath":"Advance/TransURL.md","lastUpdated":1703680098000}'),p={name:"Advance/TransURL.md"},h={id:"本地图转网络地址发送",tabindex:"-1"},m=a("a",{class:"header-anchor",href:"#本地图转网络地址发送","aria-label":'Permalink to "本地图转网络地址发送<Badge type="warning" text="普通" />"'},"​",-1),u=n('<div class="tip custom-block"><p class="custom-block-title">💡 提醒</p><p>在QQGroup（或之后的其他平台）的适配中，该平台并不支持本地图发送（即直接传入Base64）</p><p>这时候需要将本地图转为网络图发送</p><p>GsCore提供两种方式进行转换</p></div><h2 id="一、通过带有公网ip的服务器自动转为web图片" tabindex="-1">一、通过带有公网IP的服务器自动转为Web图片 <a class="header-anchor" href="#一、通过带有公网ip的服务器自动转为web图片" aria-label="Permalink to &quot;一、通过带有公网IP的服务器自动转为Web图片&quot;">​</a></h2><p>如果你的GsCore部署于带有公网IP的服务器下，那么首选该方法。</p><h4 id="通过修改文件进行配置" tabindex="-1">通过修改文件进行配置 <a class="header-anchor" href="#通过修改文件进行配置" aria-label="Permalink to &quot;通过修改文件进行配置&quot;">​</a></h4><ol><li><p>修改<code>core_config.json</code>（该文件位于<code>gsuid_core/data</code>下）文件</p><ol><li><code>[&quot;EnablePicSrv&quot;][&quot;data&quot;]</code>为<code>true</code></li><li><code>[&quot;PicSrv&quot;][&quot;data&quot;]</code>为<code>http://IP:8765</code><ol><li>链接中的IP需要修改为你服务器的公网IP，并放行8765端口</li></ol></li></ol></li><li><p>重启GsCore</p></li></ol><h4 id="通过网页控制台进行配置" tabindex="-1">通过网页控制台进行配置 <a class="header-anchor" href="#通过网页控制台进行配置" aria-label="Permalink to &quot;通过网页控制台进行配置&quot;">​</a></h4><ol><li>进入<a href="./WebConsole.html">网页控制台</a>，找到左侧【修改设定】，点击进入</li><li>在第一块配置块<code>Core</code>下，找到<code>将图片转链接发送(需公网)</code>的两个配置</li><li>一个开关打开，另一个填入&quot;<a href="http://IP:8765" target="_blank" rel="noreferrer">http://IP:8765</a>&quot;,链接中的IP需要修改为你服务器的公网IP，并放行8765端口</li><li>点击确认修改，重启GsCore</li></ol><h2 id="二、通过图床或对象存储服务自动转为web图片" tabindex="-1">二、通过图床或对象存储服务自动转为Web图片 <a class="header-anchor" href="#二、通过图床或对象存储服务自动转为web图片" aria-label="Permalink to &quot;二、通过图床或对象存储服务自动转为Web图片&quot;">​</a></h2><p>如果你部署GsCore的服务器不存在公网，或者不想暴露端口，或服务器上行速度过慢（当然再慢应该也比图床服务快），则选择该方法。</p><div class="tip custom-block"><p class="custom-block-title">💡 提醒</p><p>该方法提供了<code>sm.ms</code>图床和<code>s3对象存储</code>的两种调用方式</p><p>有关配置方法不具体细聊，后者大多情况是付费的，而<a href="https://sm.ms/" target="_blank" rel="noreferrer">sm.ms</a>的服务是免费的，可以首选smms</p><p><strong>以下以<code>smms</code>为示例进行配置</strong></p></div><h4 id="通过修改文件进行配置-1" tabindex="-1">通过修改文件进行配置 <a class="header-anchor" href="#通过修改文件进行配置-1" aria-label="Permalink to &quot;通过修改文件进行配置&quot;">​</a></h4><ol><li><p>修改<code>pic_upload_config</code>（该文件位于<code>gsuid_core/data</code>下）</p><ol><li><code>[&quot;PicUpload&quot;][&quot;data&quot;]</code>为<code>true</code></li><li><code>[&quot;PicUploadServer&quot;][&quot;data&quot;]</code>为<code>smms</code></li><li><code>[&quot;smms_token&quot;][&quot;data&quot;]</code>为你网页申请到的token</li></ol></li><li><p>重启GsCore</p></li></ol><h4 id="通过网页控制台进行配置-1" tabindex="-1">通过网页控制台进行配置 <a class="header-anchor" href="#通过网页控制台进行配置-1" aria-label="Permalink to &quot;通过网页控制台进行配置&quot;">​</a></h4><ol><li>进入<a href="./WebConsole.html">网页控制台</a>，找到左侧【修改设定】，点击进入</li><li>在<code>GsCore图片上传</code>配置块下 <ol><li>打开<code>自动上传图片</code>的开关</li><li><code>上传图片方式</code>的方式输入<code>smms</code></li><li><code>sm.ms_token</code>中输入sm.ms网页申请到的token</li></ol></li><li>点击确认修改，重启GsCore</li></ol><h2 id="extra、自定义不同场景的不同发送形式" tabindex="-1">Extra、自定义不同场景的不同发送形式 <a class="header-anchor" href="#extra、自定义不同场景的不同发送形式" aria-label="Permalink to &quot;Extra、自定义不同场景的不同发送形式&quot;">​</a></h2><p>你可以通过修改<code>send_pic_config</code>（该文件位于<code>gsuid_core/data</code>下）的配置，来自定义不同平台发送图片的方式。</p><p>打开该文件（或者使用<a href="./WebConsole.html">网页控制台</a>）查看其配置，会发现默认状态下<code>qqgroup</code>的配置项中，默认发送方式为<code>link</code>，而其他平台均为<code>base64</code>。</p><p>如果你希望无视上面两种配置开关，自动使用图床或者本地图床或者本地图方式，可以修改配置</p><ul><li><code>base64</code>：本地图发送方式</li><li><code>link_remote</code>：网络图床发送方式，<code>smms</code>或<code>s3</code></li><li><code>link_local</code>：本地图床发送方式，需要服务器有公网IP</li><li><code>link</code>：自动选择图床发送方式，在配置了本地图床的情况下，优先使用本地图床</li></ul>',19);function _(q,b,f,P,k,g){const t=d,c=l;return r(),s("div",null,[a("h1",h,[e("本地图转网络地址发送"),o(t,{type:"warning",text:"普通"}),e(),m]),o(c,{readTime:"2",words:"787"}),u])}const G=i(p,[["render",_]]);export{T as __pageData,G as default};
