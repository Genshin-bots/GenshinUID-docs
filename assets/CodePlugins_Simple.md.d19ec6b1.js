import{_ as o}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.576d70b4.js";import{_ as e}from"./chunks/Badge.167f4610.js";import{_ as r,o as c,c as t,k as a,a as s,H as n,Q as y}from"./chunks/framework.d8868ba7.js";import"./chunks/commonjsHelpers.725317a4.js";const C=JSON.parse('{"title":"简单示例","description":"","frontmatter":{},"headers":[],"relativePath":"CodePlugins/Simple.md","filePath":"CodePlugins/Simple.md","lastUpdated":1703680098000}'),E={name:"CodePlugins/Simple.md"},i={id:"简单示例",tabindex:"-1"},m=a("a",{class:"header-anchor",href:"#简单示例","aria-label":'Permalink to "简单示例<Badge type="tip" text="简单" />"'},"​",-1),b=y(`<p><a href="https://github.com/Genshin-bots/gsuid_core/blob/master/gsuid_core/plugins/gs_test.py" target="_blank" rel="noreferrer">参考</a></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> asyncio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.sv </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">SL</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">SV</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.bot </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Bot</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.models </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Event</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.logger </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> logger</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">sv</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">SV(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;复杂的服务&#39;</span><span style="color:#E1E4E8;">,  </span><span style="color:#6A737D;"># 定义一组服务\`开关\`,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">pm</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;"># 权限 0为master，1为superuser，2为群的群主, 3为管理员，6为普通，具体可见文档</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">priority</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;"># 整组服务的优先级</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">enabled</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;"># 是否启用</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">black_list</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[], </span><span style="color:#6A737D;"># 黑名单</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">area</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;ALL&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 作用范围，可选&#39;GROUP&#39;, &#39;DIRECT&#39;, &#39;ALL&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@sv.on_prefix</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;测试&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_msg</span><span style="color:#E1E4E8;">(bot: Bot, ev: Event): </span><span style="color:#6A737D;"># 必须携带两个入参</span></span>
<span class="line"><span style="color:#E1E4E8;">    name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ev.text         </span><span style="color:#6A737D;"># 获取消息除了命令之外的文字</span></span>
<span class="line"><span style="color:#E1E4E8;">    command </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ev.command   </span><span style="color:#6A737D;"># 获取消息中的命令部分</span></span>
<span class="line"><span style="color:#E1E4E8;">    im </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> process(name)  </span><span style="color:#6A737D;"># 自己的业务逻辑</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.logger.info(</span><span style="color:#9ECBFF;">&#39;正在进行[关闭/开启开关]&#39;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 发送loger给Bot端</span></span>
<span class="line"><span style="color:#E1E4E8;">    logger.info(</span><span style="color:#9ECBFF;">&#39;正在进行[关闭/开启开关]&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;"># gsuid_core自己的log</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(im)   </span><span style="color:#6A737D;"># 发送消息</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> asyncio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.sv </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">SL</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">SV</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.bot </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Bot</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.models </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Event</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.logger </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> logger</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">sv</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">SV(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;复杂的服务&#39;</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;"># 定义一组服务\`开关\`,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">pm</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#6A737D;"># 权限 0为master，1为superuser，2为群的群主, 3为管理员，6为普通，具体可见文档</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">priority</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">, </span><span style="color:#6A737D;"># 整组服务的优先级</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">enabled</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">True</span><span style="color:#24292E;">, </span><span style="color:#6A737D;"># 是否启用</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">black_list</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">[], </span><span style="color:#6A737D;"># 黑名单</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">area</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;ALL&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 作用范围，可选&#39;GROUP&#39;, &#39;DIRECT&#39;, &#39;ALL&#39;</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">@sv.on_prefix</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;测试&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">get_msg</span><span style="color:#24292E;">(bot: Bot, ev: Event): </span><span style="color:#6A737D;"># 必须携带两个入参</span></span>
<span class="line"><span style="color:#24292E;">    name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ev.text         </span><span style="color:#6A737D;"># 获取消息除了命令之外的文字</span></span>
<span class="line"><span style="color:#24292E;">    command </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ev.command   </span><span style="color:#6A737D;"># 获取消息中的命令部分</span></span>
<span class="line"><span style="color:#24292E;">    im </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> process(name)  </span><span style="color:#6A737D;"># 自己的业务逻辑</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.logger.info(</span><span style="color:#032F62;">&#39;正在进行[关闭/开启开关]&#39;</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;"># 发送loger给Bot端</span></span>
<span class="line"><span style="color:#24292E;">    logger.info(</span><span style="color:#032F62;">&#39;正在进行[关闭/开启开关]&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;"># gsuid_core自己的log</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(im)   </span><span style="color:#6A737D;"># 发送消息</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h3>`,3);function d(F,u,A,_,g,D){const p=e,l=o;return c(),t("div",null,[a("h1",i,[s("简单示例"),n(p,{type:"tip",text:"简单"}),s(),m]),n(l,{readTime:"1",words:"223"}),b])}const S=r(E,[["render",d]]);export{C as __pageData,S as default};
