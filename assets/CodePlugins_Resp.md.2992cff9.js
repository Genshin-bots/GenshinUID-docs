import{_ as r,a as E}from"./chunks/ChatMessage.vue_vue_type_style_index_0_lang.3277c88f.js";import{_ as y}from"./chunks/PageInfo.vue_vue_type_script_setup_true_lang.576d70b4.js";import{_ as i}from"./chunks/Badge.167f4610.js";import{_ as d,o as m,c as u,k as p,a as s,H as n,w as a,Q as e}from"./chunks/framework.d8868ba7.js";import"./chunks/commonjsHelpers.725317a4.js";const q=JSON.parse('{"title":"多步回话","description":"","frontmatter":{},"headers":[],"relativePath":"CodePlugins/Resp.md","filePath":"CodePlugins/Resp.md","lastUpdated":1708371017000}'),_={name:"CodePlugins/Resp.md"},F={id:"多步回话",tabindex:"-1"},b=p("a",{class:"header-anchor",href:"#多步回话","aria-label":'Permalink to "多步回话 <Badge type="warning" text="普通" />"'},"​",-1),h=p("blockquote",null,[p("p",null,"有时候我们希望某用户在触发机器人命令之后"),p("p",null,[s("还需要再接收"),p("strong",null,"一次或多次"),s("来自"),p("strong",null,"该用户或不同用户"),s("的消息")]),p("p",null,"才会继续执行业务逻辑和事件流程"),p("p",null,"那么该怎么处理呢？")],-1),C=p("h2",{id:"单用户",tabindex:"-1"},[s("单用户 "),p("a",{class:"header-anchor",href:"#单用户","aria-label":'Permalink to "单用户"'},"​")],-1),f=e(`<h3 id="代码示例" tabindex="-1">代码示例 <a class="header-anchor" href="#代码示例" aria-label="Permalink to &quot;代码示例&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.bot </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Bot</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.sv </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">SL</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">SV</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.models </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Event</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">sv_switch </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SV(</span><span style="color:#9ECBFF;">&#39;测试开关&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@sv_switch.on_fullmatch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;开始测试&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_resp_msg</span><span style="color:#E1E4E8;">(bot: Bot, ev: Event):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#9ECBFF;">&#39;开始多步会话测试&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    resp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.receive_resp(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;接下来你说的话我都会提取出来噢？&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> resp </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&#39;你说的是 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">resp.text</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 吧？&#39;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.bot </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Bot</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.sv </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">SL</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">SV</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.models </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Event</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">sv_switch </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> SV(</span><span style="color:#032F62;">&#39;测试开关&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">@sv_switch.on_fullmatch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;开始测试&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">get_resp_msg</span><span style="color:#24292E;">(bot: Bot, ev: Event):</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#032F62;">&#39;开始多步会话测试&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    resp </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.receive_resp(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;接下来你说的话我都会提取出来噢？&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    )</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> resp </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">not</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">None</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&#39;你说的是 </span><span style="color:#005CC5;">{</span><span style="color:#24292E;">resp.text</span><span style="color:#005CC5;">}</span><span style="color:#032F62;"> 吧？&#39;</span><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="多用户" tabindex="-1">多用户 <a class="header-anchor" href="#多用户" aria-label="Permalink to &quot;多用户&quot;">​</a></h2>`,3),A=e(`<h3 id="代码示例-1" tabindex="-1">代码示例 <a class="header-anchor" href="#代码示例-1" aria-label="Permalink to &quot;代码示例&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.bot </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Bot</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.sv </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">SL</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">SV</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> gsuid_core.models </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Event</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> async_timeout </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> timeout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">sv_switch </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SV(</span><span style="color:#9ECBFF;">&#39;测试开关&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@sv_switch.on_fullmatch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;开始多用户测试&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_resp_msg</span><span style="color:#E1E4E8;">(bot: Bot, ev: Event):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#9ECBFF;">&#39;开始多步会话测试&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#9ECBFF;">&#39;接下来开始游戏！？所有人的会话我都会收集起来的哦！&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        resp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.receive_mutiply_resp()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> resp </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&#39;你说的是 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">resp.text</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 吧？&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span></span>
<span class="line"><span style="color:#6A737D;"># 以下为在规定时间内结束收集回复的代码</span></span>
<span class="line"><span style="color:#6A737D;"># 常用于定时结束游戏</span></span>
<span class="line"><span style="color:#B392F0;">@sv_switch.on_fullmatch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;开始一场60秒的游戏&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_time_limit_resp_msg</span><span style="color:#E1E4E8;">(bot: Bot, ev: Event):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#9ECBFF;">&#39;接下来开始60秒的游戏！？&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> timeout(</span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;">): </span><span style="color:#6A737D;"># 限制时长60秒</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">                resp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.receive_mutiply_resp()</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> resp </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&#39;你说的是 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">resp.text</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 吧？&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> asyncio.TimeoutError:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> bot.send(</span><span style="color:#9ECBFF;">&#39;时间到!!现在开始计算每个人的分数...&#39;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.bot </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Bot</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.sv </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">SL</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">SV</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> gsuid_core.models </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Event</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> async_timeout </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> timeout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">sv_switch </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> SV(</span><span style="color:#032F62;">&#39;测试开关&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">@sv_switch.on_fullmatch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;开始多用户测试&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">get_resp_msg</span><span style="color:#24292E;">(bot: Bot, ev: Event):</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#032F62;">&#39;开始多步会话测试&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#032F62;">&#39;接下来开始游戏！？所有人的会话我都会收集起来的哦！&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">True</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        resp </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.receive_mutiply_resp()</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> resp </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">not</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">None</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&#39;你说的是 </span><span style="color:#005CC5;">{</span><span style="color:#24292E;">resp.text</span><span style="color:#005CC5;">}</span><span style="color:#032F62;"> 吧？&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            </span></span>
<span class="line"><span style="color:#6A737D;"># 以下为在规定时间内结束收集回复的代码</span></span>
<span class="line"><span style="color:#6A737D;"># 常用于定时结束游戏</span></span>
<span class="line"><span style="color:#6F42C1;">@sv_switch.on_fullmatch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;开始一场60秒的游戏&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">get_time_limit_resp_msg</span><span style="color:#24292E;">(bot: Bot, ev: Event):</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#032F62;">&#39;接下来开始60秒的游戏！？&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">try</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">with</span><span style="color:#24292E;"> timeout(</span><span style="color:#005CC5;">60</span><span style="color:#24292E;">): </span><span style="color:#6A737D;"># 限制时长60秒</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">True</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">                resp </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.receive_mutiply_resp()</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> resp </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">not</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">None</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&#39;你说的是 </span><span style="color:#005CC5;">{</span><span style="color:#24292E;">resp.text</span><span style="color:#005CC5;">}</span><span style="color:#032F62;"> 吧？&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">except</span><span style="color:#24292E;"> asyncio.TimeoutError:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> bot.send(</span><span style="color:#032F62;">&#39;时间到!!现在开始计算每个人的分数...&#39;</span><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">💡 提醒</p><p>可以看到<code>Bot.receive_resp()</code>后续<strong>只会接受触发该命令的用户</strong>的消息</p><p>但是<code>Bot.receive_mutiply_resp()</code>会接受后续<strong>全部用户的信息</strong></p></div><p>注意到<code>Bot.send_option()</code>和<code>Bot.receive_mutiply_resp()</code>均会调用<code>Bot.receive_resp()</code></p><p>他们三个的参数都差不多，实际使用，功能区别如下：</p><ul><li><p><code>Bot.send_option()</code>只会发送按钮（仅在QQGroup）或者在<code>unsuported_platform</code>参数为<code>True</code>的的情况下，为所有不适配按钮的发送多选消息。</p></li><li><p><code>Bot.receive_resp()</code>在上面这个方法的基础上，还会等待<strong>触发命令用户</strong>的<strong>下一条回复</strong>。</p></li><li><p><code>Bot.receive_mutiply_resp()</code>则是在上面方法的基础上，还会等待该群<strong>接下来所有用户</strong>的回复</p></li></ul><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h3><ul><li><p><code>reply</code>参数可以填入<code>Bot.send()</code>内可填入的任何值，会让Bot发送一次消息，然后继续执行流程</p></li><li><p><code>option_list</code>参数可以填入类型<code>List[str], List[Button]</code></p><ul><li>会按照列表，每行两个，发送按钮（仅在QQGroup ）</li><li>该参数也可以填入<code>List[List[str]], List[List[Button]]</code>，代表每行几个按钮</li></ul></li></ul>`,9);function g(B,D,v,w,k,x){const t=i,c=y,l=E,o=r;return m(),u("div",null,[p("h1",F,[s("多步回话 "),n(t,{type:"warning",text:"普通"}),s(),b]),n(c,{readTime:"3",words:"819"}),h,C,n(o,{title:"聊天界面"},{default:a(()=>[n(l,{nickname:"Wuyi无疑"},{default:a(()=>[s("开始测试")]),_:1}),n(l,{nickname:"GsCore"},{default:a(()=>[s("开始多步会话测试")]),_:1}),n(l,{nickname:"GsCore"},{default:a(()=>[s("接下来你说的话我都会提取出来噢？")]),_:1}),n(l,{nickname:"干扰用户",type:"danger",tag:"用户"},{default:a(()=>[s("你们在说什么呢？")]),_:1}),n(l,{nickname:"Wuyi无疑"},{default:a(()=>[s("我爱你")]),_:1}),n(l,{nickname:"GsCore"},{default:a(()=>[s("你说的是 我爱你 吧？")]),_:1})]),_:1}),f,n(o,{title:"聊天界面"},{default:a(()=>[n(l,{nickname:"Wuyi无疑"},{default:a(()=>[s("开始多用户测试")]),_:1}),n(l,{nickname:"GsCore"},{default:a(()=>[s("开始多步会话测试")]),_:1}),n(l,{nickname:"GsCore"},{default:a(()=>[s("接下来开始游戏！？所有人的会话我都会收集起来的哦！")]),_:1}),n(l,{nickname:"群友A",type:"danger",tag:"用户"},{default:a(()=>[s("你们在说什么呢？")]),_:1}),n(l,{nickname:"GsCore"},{default:a(()=>[s("你说的是 你们在说什么呢？ 吧？")]),_:1}),n(l,{nickname:"Wuyi无疑"},{default:a(()=>[s("我爱你")]),_:1}),n(l,{nickname:"GsCore"},{default:a(()=>[s("你说的是 我爱你 吧？")]),_:1})]),_:1}),A])}const L=d(_,[["render",g]]);export{q as __pageData,L as default};
