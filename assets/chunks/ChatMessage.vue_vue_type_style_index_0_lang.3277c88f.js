import{_ as L,o,c,k as s,t as f,e as P,r as $,n as M,d as V,h as u,g as _,x as W,j as A,Z as H,N as R,a as b,H as j,$ as D}from"./framework.d8868ba7.js";import{_ as I}from"./Badge.167f4610.js";const T={props:{controls:Boolean,title:String},data:()=>({tab:"default"}),computed:{mini(){return!this.controls&&!this.title}}};const U={class:"controls"},Z=s("div",{class:"circle red"},null,-1),q=s("div",{class:"circle yellow"},null,-1),J=s("div",{class:"circle green"},null,-1),O={class:"title"},Y={key:0,class:"title-text"},F={class:"content"};function K(d,g,e,h,y,p){return o(),c("div",{class:M(["panel-view",{mini:p.mini}])},[s("div",U,[Z,q,J,s("div",O,[e.title?(o(),c("span",Y,f(e.title),1)):P("",!0)])]),s("div",F,[$(d.$slots,"default")])],2)}const ae=L(T,[["render",K]]),Q=["src"],X={class:"nickname"},ee={class:"message-box"},oe=V({__name:"ChatMessage",props:{nickname:{},color:{},avatar:{},tag:{},type:{}},setup(d,{expose:g}){const e=d,h={Alice:"#cc0066",Bob:"#00994d",Carol:"#1e90ff",Dave:"#f4a460",群友A:"#f4a460",干扰用户:"#f4a460"},y={Wuyi无疑:"https://s2.loli.net/2023/10/05/GHjJNWBP4nezgIU.png",GsCore:"https://s2.loli.net/2023/03/25/bareSdYcsmRPOyZ.png"},p={GsCore:"tip",Wuyi无疑:"danger"},S={GsCore:"机器人",Wuyi无疑:"用户"},l=u(!1),k=u(!1),v=u(!1),r=u(),w=_(()=>e.color||h[e.nickname]),C=_(()=>e.avatar||y[e.nickname]),E=_(()=>e.tag||S[e.nickname]),N=_(()=>e.type||p[e.nickname]);function z(){let t;for(const n of document.querySelectorAll(".chat-message")){if(n===r.value)return t;t=n}}W(k,t=>{if(!t)return l.value=!1;const n=z();if(!n||n.getBoundingClientRect().bottom<0)return i();const m=n.__vue__.exposed;m.moving.value||!m.shown.value?m.onappear(i):i()});let x=()=>{};function i(){l.value=!0,v.value=!0,setTimeout(()=>{v.value=!1,x()},100)}function a(){r.value.getBoundingClientRect().top<innerHeight&&(k.value=!0)}const G=D();return g({moving:v,shown:l,onappear(t){x=t}}),A(()=>{r.value.__vue__=G,a(),addEventListener("scroll",a),addEventListener("resize",a)}),H(()=>{removeEventListener("scroll",a),removeEventListener("resize",a)}),(t,n)=>{const B=I;return o(),c("div",{ref_key:"root",ref:r,class:M(["chat-message",{shown:l.value}])},[C.value?(o(),c("img",{key:0,class:"avatar",src:C.value},null,8,Q)):(o(),c("div",{key:1,class:"avatar",style:R({backgroundColor:w.value})},f(t.nickname[0]),5)),s("div",X,[b(f(t.nickname)+" ",1),j(B,{type:N.value,text:E.value},null,8,["type","text"])]),s("div",ee,[$(t.$slots,"default",{},()=>[b(" ")])])],2)}}});export{ae as _,oe as a};
